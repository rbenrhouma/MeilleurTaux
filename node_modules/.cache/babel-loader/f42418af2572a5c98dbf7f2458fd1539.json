{"ast":null,"code":"var _jsxFileName = \"/Users/ridha/LeReacteurJs/Certificat/MeilleurTaux-2/src/screens/ScreenBackOffice.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactLoading from \"react-loading\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst ScreenBackOffice = ({\n  serverURL\n}) => {\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLogged, setIsLogged] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const [allDevis, setAllDevis] = useState([]);\n  useEffect(() => {\n    const devis = allDevis => {\n      const tabDevis = [];\n\n      for (let index = 0; index < allDevis.length; index++) {\n        const devis = allDevis[index];\n        tabDevis.push(React.createElement(\"div\", {\n          key: index,\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-around\",\n            backgroundColor: index % 2 ? \"white\" : \"#F1F1F1\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 11\n          }\n        }, React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            // flex: \"1\",\n            justifyContent: \"space-between\",\n            fontSize: \"20px\",\n            width: \"90%\"\n          },\n          onClick: () => {\n            history.push(`/devis/${devis._id}`);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 13\n          }\n        }, React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }\n        }, \"Code postal : \", devis.zipCode), React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }\n        }, \"E-mail : \", devis.email), React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }\n        }, \"Type du bien : \", devis.typeBien), React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }\n        }, \"Etat du bien : \", devis.etatBien), React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }\n        }, \"Montant total : \", devis.total)), React.createElement(\"span\", {\n          style: {\n            marginLeft: \"20px\"\n          },\n          onClick: async () => {\n            try {\n              setIsLoading(true);\n              await axios.post(serverURL + \"devis/delete\", {\n                id: devis._id\n              });\n              setIsLoading(false);\n            } catch (err) {\n              console.log(err);\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }\n        }, \"X\")));\n      }\n\n      return tabDevis;\n    };\n\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(serverURL + \"backoffice\");\n        setAllDevis(devis(response.data));\n        setIsLoading(false);\n      } catch (err) {\n        alert(err);\n        console.log(err);\n      }\n    };\n\n    fetchData();\n  }, [isLoading]);\n  useEffect(() => {\n    const connexion = Cookies.get(\"connexion\");\n\n    if (connexion === \"true\") {\n      setIsLogged(true);\n    }\n  }, []);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (password === \"tothemoon\") {\n      setIsLogged(true);\n    }\n  };\n\n  const handlePasswordChange = event => {\n    const value = event.target.value;\n    setPassword(value);\n    Cookies.set(\"connexion\", \"true\");\n  };\n\n  return React.createElement(React.Fragment, null, isLogged === false ? React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      paddingTop: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Welcome\\xA0to\\xA0Back-Office\"), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, React.createElement(\"input\", {\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    value: password,\n    onChange: handlePasswordChange,\n    style: {\n      height: \"30px\",\n      width: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }))) : isLoading ? React.createElement(\"div\", {\n    style: {\n      paddingTop: \"100px\",\n      display: \"flex\",\n      flex: \"1\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, React.createElement(ReactLoading, {\n    type: \"spinningBubbles\",\n    color: \"black\",\n    height: 100,\n    width: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })) : React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, React.createElement(\"button\", {\n    onClick: () => {\n      Cookies.remove(\"connexion\");\n      setIsLogged(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, \"D\\xE9connexion\"), allDevis));\n};\n\nexport default ScreenBackOffice; // key: generator.generate({\n//   length: 8,\n//   numbers: true,\n//   uppercase: false,\n//   exclude: \"abcdefghijklmnopqrstuvwxyz\"\n// }),\n// typeBien: devis.typeBien,\n// etatBien: devis.etatBien,\n// usageBien: devis.usageBien,\n// situationUser: devis.situationUser,\n// typeBienLib: devis.typeBienLib,\n// etatBienLib: devis.etatBienLib,\n// usageBienLib: devis.usageBienLib,\n// situationUserLib: devis.situationUserLib,\n// country: devis.country,\n// zipCode: devis.zipCode,\n// montant: devis.montant,\n// travaux: devis.travaux,\n// notaire: devis.notaire,\n// total: devis.total,\n// email: devis.email","map":{"version":3,"sources":["/Users/ridha/LeReacteurJs/Certificat/MeilleurTaux-2/src/screens/ScreenBackOffice.js"],"names":["React","useState","useEffect","useHistory","ReactLoading","axios","Cookies","ScreenBackOffice","serverURL","history","isLoading","setIsLoading","isLogged","setIsLogged","password","setPassword","allDevis","setAllDevis","devis","tabDevis","index","length","push","display","alignItems","justifyContent","backgroundColor","fontSize","width","_id","zipCode","email","typeBien","etatBien","total","marginLeft","post","id","err","console","log","fetchData","response","get","data","alert","connexion","handleSubmit","event","preventDefault","handlePasswordChange","value","target","set","flexDirection","paddingTop","height","flex","remove"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactLoading from \"react-loading\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst ScreenBackOffice = ({ serverURL }) => {\n  const history = useHistory();\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLogged, setIsLogged] = useState(false);\n  const [password, setPassword] = useState(\"\");\n\n  const [allDevis, setAllDevis] = useState([]);\n\n  useEffect(() => {\n    const devis = allDevis => {\n      const tabDevis = [];\n      for (let index = 0; index < allDevis.length; index++) {\n        const devis = allDevis[index];\n        tabDevis.push(\n          <div\n            key={index}\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-around\",\n              backgroundColor: index % 2 ? \"white\" : \"#F1F1F1\"\n            }}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                // flex: \"1\",\n                justifyContent: \"space-between\",\n                fontSize: \"20px\",\n                width: \"90%\"\n              }}\n              onClick={() => {\n                history.push(`/devis/${devis._id}`);\n              }}\n            >\n              <span>Code postal : {devis.zipCode}</span>\n              <span>E-mail : {devis.email}</span>\n              <span>Type du bien : {devis.typeBien}</span>\n              <span>Etat du bien : {devis.etatBien}</span>\n              <span>Montant total : {devis.total}</span>\n            </div>\n            <span\n              style={{ marginLeft: \"20px\" }}\n              onClick={async () => {\n                try {\n                  setIsLoading(true);\n                  await axios.post(serverURL + \"devis/delete\", {\n                    id: devis._id\n                  });\n                  setIsLoading(false);\n                } catch (err) {\n                  console.log(err);\n                }\n              }}\n            >\n              X\n            </span>\n          </div>\n        );\n      }\n      return tabDevis;\n    };\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(serverURL + \"backoffice\");\n        setAllDevis(devis(response.data));\n        setIsLoading(false);\n      } catch (err) {\n        alert(err);\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [isLoading]);\n\n  useEffect(() => {\n    const connexion = Cookies.get(\"connexion\");\n    if (connexion === \"true\") {\n      setIsLogged(true);\n    }\n  }, []);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (password === \"tothemoon\") {\n      setIsLogged(true);\n    }\n  };\n\n  const handlePasswordChange = event => {\n    const value = event.target.value;\n    setPassword(value);\n    Cookies.set(\"connexion\", \"true\");\n  };\n\n  return (\n    <>\n      {isLogged === false ? (\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            paddingTop: \"100px\"\n          }}\n        >\n          <h1>Welcome to Back-Office</h1>\n          <form\n            onSubmit={handleSubmit}\n            style={{ display: \"flex\", alignItems: \"center\" }}\n          >\n            <input\n              placeholder=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              value={password}\n              onChange={handlePasswordChange}\n              style={{\n                height: \"30px\",\n                width: \"300px\"\n              }}\n            />\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        </div>\n      ) : isLoading ? (\n        <div\n          style={{\n            paddingTop: \"100px\",\n            display: \"flex\",\n            flex: \"1\",\n            justifyContent: \"center\"\n          }}\n        >\n          <ReactLoading\n            type=\"spinningBubbles\"\n            color=\"black\"\n            height={100}\n            width={100}\n          />\n        </div>\n      ) : (\n        <div>\n          <button\n            onClick={() => {\n              Cookies.remove(\"connexion\");\n              setIsLogged(false);\n            }}\n          >\n            Déconnexion\n          </button>\n          {allDevis}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ScreenBackOffice;\n\n// key: generator.generate({\n//   length: 8,\n//   numbers: true,\n//   uppercase: false,\n//   exclude: \"abcdefghijklmnopqrstuvwxyz\"\n// }),\n// typeBien: devis.typeBien,\n// etatBien: devis.etatBien,\n// usageBien: devis.usageBien,\n// situationUser: devis.situationUser,\n// typeBienLib: devis.typeBienLib,\n// etatBienLib: devis.etatBienLib,\n// usageBienLib: devis.usageBienLib,\n// situationUserLib: devis.situationUserLib,\n// country: devis.country,\n// zipCode: devis.zipCode,\n// montant: devis.montant,\n// travaux: devis.travaux,\n// notaire: devis.notaire,\n// total: devis.total,\n// email: devis.email\n"]},"metadata":{},"sourceType":"module"}